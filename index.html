<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>LOUPA // MULTI-DEVICE DIGITAL ARCHITECTURE</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;700&family=JetBrains+Mono:wght@100;400;700&display=swap" rel="stylesheet">

    <style>
        /* LOUPA OS v6.0 - THE OMNI-REACH UPDATE
           A high-performance agency interface designed for all screens.
        */
        :root {
            --bg: #030303;
            --accent: #ff5500;
            --accent-glow: rgba(255, 85, 0, 0.3);
            --text: #ffffff;
            --text-dim: #555555;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
            --success: #00ff88;
            --font-main: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --ease: cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* --- GLOBAL & MOBILE OPTIMIZATION --- */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        html, body { 
            background: var(--bg); color: var(--text); 
            font-family: var(--font-main); overflow-x: hidden;
            width: 100%; height: 100%; cursor: crosshair;
        }

        /* --- BACKGROUND ENGINE: LAYERED VISUALS --- */
        #nexus-canvas { position: fixed; inset: 0; z-index: -1; }
        
        .nebula {
            position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle at center, var(--accent-glow) 0%, transparent 40%);
            z-index: -2; animation: nebula-float 20s infinite alternate linear;
            filter: blur(80px); opacity: 0.5;
        }

        .scanline {
            position: fixed; top: 0; left: 0; width: 100%; height: 10px;
            background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.02), transparent);
            z-index: 1000; pointer-events: none; animation: scan 8s linear infinite;
        }

        .grid-3d {
            position: fixed; inset: 0; z-index: -3;
            background-image: linear-gradient(var(--border) 1px, transparent 1px), 
                              linear-gradient(90deg, var(--border) 1px, transparent 1px);
            background-size: 50px 50px; opacity: 0.1;
            transform: perspective(500px) rotateX(60deg) translateY(-100px);
            transform-origin: top;
        }

        @keyframes nebula-float { from { transform: translate(-5%, -5%); } to { transform: translate(5%, 5%); } }
        @keyframes scan { from { top: -100%; } to { top: 100%; } }

        /* --- TYPOGRAPHY & BUTTONS --- */
        h1, h2, h3 { font-family: 'Space Grotesk'; text-transform: uppercase; letter-spacing: -2px; }
        .mono { font-family: var(--font-mono); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; }

        .btn {
            background: transparent; border: 1px solid var(--border); color: #fff;
            padding: 12px 24px; font-family: var(--font-mono); font-size: 0.7rem;
            text-transform: uppercase; transition: all 0.4s var(--ease);
            position: relative; overflow: hidden; display: inline-flex; align-items: center; justify-content: center;
        }

        .btn:hover { background: #fff; color: #000; border-color: #fff; transform: translateY(-3px); }
        .btn-primary { background: var(--accent); border-color: var(--accent); color: #000; font-weight: 700; }
        .btn-primary:hover { background: #fff; color: #000; }

        /* --- NAVIGATION --- */
        nav {
            position: fixed; top: 0; width: 100%; padding: 20px 5%;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 2000; backdrop-filter: blur(10px); border-bottom: 1px solid var(--border);
        }

        /* --- CONTAINER SYSTEM --- */
        .container { width: 90%; max-width: 1400px; margin: 0 auto; }

        /* --- SERVICE MATRIX (GRID) --- */
        .matrix-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px; margin: 50px 0;
        }

        .card {
            background: rgba(10, 10, 10, 0.8); border: 1px solid var(--border);
            padding: 30px; position: relative; transition: 0.5s var(--ease);
            display: flex; flex-direction: column; justify-content: space-between;
            min-height: 380px;
        }

        .card:hover { border-color: var(--accent); transform: scale(1.02); background: rgba(20,20,20,0.95); }
        .card::after {
            content: ''; position: absolute; inset: 0; pointer-events: none;
            box-shadow: 0 0 30px rgba(255, 85, 0, 0); transition: 0.5s;
        }
        .card:hover::after { box-shadow: 0 0 30px rgba(255, 85, 0, 0.1); }

        /* --- MOBILE SPECIFIC FIXES --- */
        @media (max-width: 768px) {
            nav { padding: 15px 5%; }
            .hero h1 { font-size: 3rem !important; }
            .matrix-grid { grid-template-columns: 1fr; }
            .card { min-height: 300px; }
            .hide-mobile { display: none; }
            #cursor-ring { display: none; } /* No custom cursor on touch */
        }

        /* --- AUTH & ADMIN OVERLAYS --- */
        #gatekeeper {
            position: fixed; inset: 0; background: var(--bg); z-index: 5000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        #admin-panel {
            position: fixed; inset: 0; background: #000; z-index: 6000;
            padding: 50px; display: none; overflow-y: auto; font-family: var(--font-mono);
        }

        /* --- ANIMATIONS --- */
        .reveal { opacity: 0; transform: translateY(30px); transition: 1s var(--ease); }
        .reveal.active { opacity: 1; transform: translateY(0); }

        #cursor-ring {
            position: fixed; width: 40px; height: 40px; border: 1px solid var(--accent);
            border-radius: 50%; pointer-events: none; z-index: 9999; transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
    </style>
</head>
<body>

    <div class="nebula"></div>
    <div class="grid-3d"></div>
    <div class="scanline"></div>
    <canvas id="nexus-canvas"></canvas>
    <div id="cursor-ring"></div>

    <div id="toast-bin" style="position:fixed; top:100px; right:20px; z-index:9000;"></div>

    <div id="gatekeeper">
        <div class="mono" style="color:var(--accent); margin-bottom:20px;">[ AUTH_REQUIRED ]</div>
        <h1 style="font-size: 4rem; margin-bottom: 40px;">LOUPA<span>.</span></h1>
        <button onclick="Loupa.auth.login()" class="btn btn-primary">Link Account</button>
    </div>

    <div id="admin-panel">
        <div style="display:flex; justify-content:space-between; margin-bottom:50px;">
            <h2 style="color:var(--accent)">ROOT_ACCESS: ACTIVE</h2>
            <button onclick="Loupa.admin.toggle()" class="btn">EXIT_SESSION</button>
        </div>
        <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:20px; margin-bottom:50px;">
            <div style="background:#111; padding:30px; border-bottom:2px solid var(--accent);">
                <small>TOTAL_REVENUE</small><div id="adm-rev" style="font-size:2rem;">$0</div>
            </div>
            <div style="background:#111; padding:30px; border-bottom:2px solid var(--success);">
                <small>TOTAL_USERS</small><div id="adm-users" style="font-size:2rem;">0</div>
            </div>
            <div style="background:#111; padding:30px; border-bottom:2px solid #00bcff;">
                <small>PROJECTS_ACTIVE</small><div id="adm-orders" style="font-size:2rem;">0</div>
            </div>
        </div>
        <table style="width:100%; border-collapse:collapse; text-align:left;">
            <thead style="color:var(--text-dim); border-bottom:1px solid #222;">
                <tr><th style="padding:15px;">CLIENT</th><th>EMAIL</th><th>STATUS</th><th>ACTIONS</th></tr>
            </thead>
            <tbody id="adm-table"></tbody>
        </table>
    </div>

    <nav>
        <div class="brand" style="font-size:1.5rem; font-weight:700;">LOUPA<span>.</span></div>
        <div style="display:flex; gap:30px; align-items:center;">
            <div class="mono hide-mobile" id="user-name">OFFLINE</div>
            <div id="admin-tag" style="display:none; color:var(--accent);" class="mono">[ADMIN]</div>
        </div>
    </nav>

    <main id="app-root" style="display:none;">
        <section class="container" style="min-height:90vh; display:flex; flex-direction:column; justify-content:center;">
            <div class="reveal">
                <div class="mono" style="color:var(--accent); margin-bottom:20px;">// SYSTEM_ONLINE: V6.0</div>
                <h1 style="font-size: clamp(3rem, 10vw, 8rem); line-height:0.9;">CREATIVE<br><span id="typewriter" style="color:var(--accent)"></span></h1>
                <p style="max-width:500px; color:var(--text-dim); margin:30px 0; border-left:2px solid var(--accent); padding-left:20px;">
                    Fast-track your digital presence with modular design, automated intelligence, and scalable code.
                </p>
                <div style="display:flex; gap:15px;">
                    <button onclick="window.scrollTo(0, 1000)" class="btn btn-primary">Browse Matrix</button>
                    <button class="btn hide-mobile">Request Quote</button>
                </div>
            </div>
        </section>

        <section class="container" id="matrix" style="padding:100px 0;">
            <div class="reveal">
                <h2 style="font-size:3rem; margin-bottom:10px;">Capabilities</h2>
                <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:40px;">
                    <button onclick="Loupa.ui.filter('ALL')" class="btn" style="padding:5px 10px;">ALL</button>
                    <button onclick="Loupa.ui.filter('EZ')" class="btn" style="padding:5px 10px; border-color:var(--success)">BUDGET</button>
                    <button onclick="Loupa.ui.filter('ELITE')" class="btn" style="padding:5px 10px; border-color:var(--accent)">ELITE</button>
                </div>
                <div class="matrix-grid" id="matrix-target"></div>
            </div>
        </section>

        <section class="container" style="padding-bottom:100px;">
            <div class="reveal">
                <h2 style="font-size:2rem; margin-bottom:30px;">Active Deployments</h2>
                <div id="user-orders" class="mono" style="background:rgba(255,255,255,0.02); padding:30px; border:1px solid var(--border);">
                    NO_ACTIVE_TASKS
                </div>
            </div>
        </section>

        <footer class="container" style="padding:50px 0; border-top:1px solid var(--border); display:flex; justify-content:space-between; align-items:center;">
            <div class="mono" style="color:var(--text-dim);">&copy; 2026 LOUPA // OS_V.6.0.0</div>
            <div class="mono">STATUS: <span style="color:var(--success)">NOMINAL</span></div>
        </footer>
    </main>

    <div id="checkout-modal" style="position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:7000; display:none; align-items:center; justify-content:center; backdrop-filter:blur(10px);">
        <div style="background:#0a0a0a; border:1px solid var(--accent); padding:40px; width:90%; max-width:500px; text-align:center;">
            <h3 id="m-name" style="margin-bottom:10px;">SERVICE_NAME</h3>
            <div id="m-price" style="font-size:2rem; color:var(--accent); margin-bottom:30px;">$0</div>
            <div id="paypal-container"></div>
            <button onclick="Loupa.ui.closeModal()" class="btn" style="width:100%; margin-top:20px;">ABORT</button>
        </div>
    </div>

    <script>
    /**
     * LOUPA CORE SYSTEM ENGINE
     * Complete Architectural Rebuild for Cross-Device Performance
     */
    const Loupa = (() => {

        const ADMIN_EMAIL = "wahdkhonafdar@gmail.com";
        
        // INITIALIZE FIREBASE
        const config = {
            apiKey: "AIzaSyDwkqu_JpelnceEjwbdP76hzwQ1JMFI2D0",
            authDomain: "loupa-d2ca2.firebaseapp.com",
            projectId: "loupa-d2ca2",
            storageBucket: "loupa-d2ca2.firebasestorage.app",
            messagingSenderId: "1062889452519",
            appId: "1:1062889452519:web:a412e262ba0981d3c3c342"
        };
        firebase.initializeApp(config);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // 15+ SERVICES REGISTRY
        const services = [
            { id: "S1", name: "Favicon Pack", price: 15, cat: "EZ", desc: "Every icon size you need for web/mobile apps." },
            { id: "S2", name: "Logo Design", price: 25, cat: "EZ", desc: "Clean minimalist vector logo in 24 hours." },
            { id: "S3", name: "CSS Fix", price: 30, cat: "EZ", desc: "Fixing annoying layout or styling bugs." },
            { id: "S4", name: "Site Speed Audit", price: 45, cat: "EZ", desc: "Deep analysis and performance optimization plan." },
            { id: "S5", name: "Discord Embeds", price: 20, cat: "EZ", desc: "Rich webhook styling for your server updates." },
            { id: "S6", name: "Custom landing", price: 299, cat: "MID", desc: "High-conversion one-page site for products." },
            { id: "S7", name: "SEO Launchpad", price: 150, cat: "MID", desc: "Technical SEO setup for Google search ranking." },
            { id: "S8", name: "Python Automator", price: 250, cat: "MID", desc: "Custom scripts to automate boring tasks." },
            { id: "S9", name: "SaaS Blueprint", price: 1499, cat: "ELITE", desc: "Full software architecture and database design." },
            { id: "S10", name: "Neural AI Agent", price: 850, cat: "ELITE", desc: "Custom GPT agent integrated with your data." },
            { id: "S11", name: "Security Audit", price: 600, cat: "ELITE", desc: "Vulnerability scan and security patch report." },
            { id: "S12", name: "Smart Contract", price: 1200, cat: "ELITE", desc: "Solidity contract development for Ethereum." },
            { id: "S13", name: "AWS Migration", price: 900, cat: "ELITE", desc: "Moving your infrastructure to the cloud." },
            { id: "S14", name: "Custom API", price: 500, cat: "ELITE", desc: "Building a high-speed backend interface." },
            { id: "S15", name: "Lead Scraper", price: 350, cat: "MID", desc: "High-volume business data extraction." }
        ];

        // UI & ANIMATION MODULE
        const UI = {
            filterType: 'ALL',

            init() {
                this.renderMatrix();
                this.startNexus();
                this.typewriter();
                this.bindCursor();
                this.initScroll();
                this.startBinaryRain(); // Secret feature
            },

            renderMatrix() {
                const target = document.getElementById('matrix-target');
                const data = this.filterType === 'ALL' ? services : services.filter(s => s.cat === this.filterType);
                
                target.innerHTML = data.map(s => `
                    <div class="card reveal active">
                        <div>
                            <div class="mono" style="color:var(--accent); font-size:0.6rem;">ID_${s.id}</div>
                            <h3>${s.name}</h3>
                            <p style="color:var(--text-dim); font-size:0.85rem; margin-top:10px;">${s.desc}</p>
                        </div>
                        <div style="margin-top:20px;">
                            <div style="font-size:1.5rem; font-weight:700; color:${s.price <= 30 ? 'var(--success)' : '#fff'}">$${s.price}</div>
                            <button onclick="Loupa.ui.openModal('${s.id}')" class="btn" style="width:100%; margin-top:15px;">
                                ${s.price <= 30 ? 'QUICK_GRAB' : 'REQUEST_DEV'}
                            </button>
                        </div>
                    </div>
                `).join('');
            },

            filter(type) {
                this.filterType = type;
                this.renderMatrix();
                this.toast("MATRIX_FILTERED: " + type);
            },

            openModal(id) {
                const s = services.find(x => x.id === id);
                document.getElementById('m-name').innerText = s.name.toUpperCase();
                document.getElementById('m-price').innerText = `$${s.price}`;
                document.getElementById('checkout-modal').style.display = 'flex';

                document.getElementById('paypal-container').innerHTML = '';
                paypal.Buttons({
                    createOrder: (data, actions) => actions.order.create({ purchase_units: [{ amount: { value: s.price } }] }),
                    onApprove: (data, actions) => actions.order.capture().then(() => Loupa.orders.create(s))
                }).render('#paypal-container');
            },

            closeModal() { document.getElementById('checkout-modal').style.display = 'none'; },

            toast(msg) {
                const b = document.getElementById('toast-bin');
                const t = document.createElement('div');
                t.style.cssText = "background:#111; border:1px solid var(--accent); padding:15px; font-family:var(--font-mono); font-size:0.7rem; margin-bottom:10px; animation:slide 0.3s ease-out;";
                t.innerText = `> ${msg}`;
                b.appendChild(t);
                setTimeout(() => t.remove(), 4000);
            },

            startNexus() {
                const c = document.getElementById('nexus-canvas');
                const ctx = c.getContext('2d');
                let pts = [];
                const resize = () => { c.width = window.innerWidth; c.height = window.innerHeight; };
                window.onresize = resize; resize();

                for(let i=0; i<100; i++) pts.push({ x:Math.random()*c.width, y:Math.random()*c.height, vx:(Math.random()-0.5)*0.5, vy:(Math.random()-0.5)*0.5 });

                const draw = () => {
                    ctx.clearRect(0,0,c.width,c.height);
                    pts.forEach(p => {
                        p.x += p.vx; p.y += p.vy;
                        if(p.x<0 || p.x>c.width) p.vx *= -1; if(p.y<0 || p.y>c.height) p.vy *= -1;
                        ctx.fillStyle = 'rgba(255,85,0,0.3)'; ctx.beginPath(); ctx.arc(p.x,p.y,1,0,Math.PI*2); ctx.fill();
                        pts.forEach(p2 => {
                            const d = Math.hypot(p.x-p2.x, p.y-p2.y);
                            if(d < 100) {
                                ctx.strokeStyle = `rgba(255,85,0,${1-d/100})`; ctx.lineWidth = 0.5;
                                ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(p2.x,p2.y); ctx.stroke();
                            }
                        });
                    });
                    requestAnimationFrame(draw);
                };
                draw();
            },

            startBinaryRain() {
                setInterval(() => {
                    const r = document.createElement('div');
                    r.style.cssText = `position:fixed; left:${Math.random()*100}vw; top:-50px; color:var(--accent); font-family:var(--font-mono); font-size:0.6rem; opacity:0.2; pointer-events:none; z-index:-1;`;
                    r.innerText = Math.random() > 0.5 ? '1' : '0';
                    document.body.appendChild(r);
                    const anim = r.animate([{ top: '-50px' }, { top: '110vh' }], { duration: Math.random()*5000+5000 });
                    anim.onfinish = () => r.remove();
                }, 200);
            },

            typewriter() {
                const words = ["SOLUTIONS.", "INTERFACES.", "SYSTEMS."];
                let i=0, j=0, del=false;
                const t = () => {
                    const cur = words[i];
                    document.getElementById('typewriter').innerText = del ? cur.substring(0, j--) : cur.substring(0, j++);
                    if(!del && j > cur.length) { del=true; setTimeout(t, 2000); }
                    else if(del && j === 0) { del=false; i=(i+1)%words.length; setTimeout(t, 500); }
                    else setTimeout(t, del ? 50 : 100);
                };
                t();
            },

            bindCursor() {
                const ring = document.getElementById('cursor-ring');
                document.addEventListener('mousemove', e => {
                    ring.style.left = e.clientX + 'px';
                    ring.style.top = e.clientY + 'px';
                });
            },

            initScroll() {
                const obs = new IntersectionObserver(ents => {
                    ents.forEach(e => { if(e.isIntersecting) e.target.classList.add('active'); });
                }, { threshold: 0.1 });
                document.querySelectorAll('.reveal').forEach(r => obs.observe(r));
            }
        };

        // AUTH MODULE
        const Auth = {
            login() {
                const prov = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(prov).then(res => {
                    db.collection("users").doc(res.user.uid).set({
                        email: res.user.email,
                        name: res.user.displayName,
                        lastSeen: new Date()
                    }, { merge: true });
                    UI.toast("LINK_STABLISHED");
                });
            },
            init() {
                auth.onAuthStateChanged(user => {
                    if(user) {
                        document.getElementById('gatekeeper').style.display = 'none';
                        document.getElementById('app-root').style.display = 'block';
                        document.getElementById('user-name').innerText = user.displayName.toUpperCase();
                        if(user.email === ADMIN_EMAIL) document.getElementById('admin-tag').style.display = 'block';
                        Orders.listen(user.uid);
                    } else {
                        document.getElementById('gatekeeper').style.display = 'flex';
                        document.getElementById('app-root').style.display = 'none';
                    }
                });
            }
        };

        // ORDERS MODULE
        const Orders = {
            create(service) {
                db.collection("orders").add({
                    uid: auth.currentUser.uid,
                    service: service.name,
                    price: service.price,
                    status: 'DEPLOYING',
                    time: new Date()
                }).then(() => {
                    UI.closeModal();
                    UI.toast("DEPLOYMENT_STARTED");
                });
            },
            listen(uid) {
                db.collection("orders").where("uid", "==", uid).onSnapshot(snap => {
                    const target = document.getElementById('user-orders');
                    if(snap.empty) return;
                    target.innerHTML = snap.docs.map(doc => {
                        const d = doc.data();
                        return `<div style="display:flex; justify-content:space-between; border-bottom:1px solid #222; padding:10px 0;">
                            <span>${d.service}</span> <span style="color:var(--accent)">${d.status}</span>
                        </div>`;
                    }).join('');
                });
            }
        };

        // ADMIN MODULE
        const Admin = {
            toggle() {
                const p = document.getElementById('admin-panel');
                p.style.display = p.style.display === 'block' ? 'none' : 'block';
                if(p.style.display === 'block') this.sync();
            },
            sync() {
                db.collection("users").onSnapshot(snap => {
                    document.getElementById('adm-users').innerText = snap.size;
                    document.getElementById('adm-table').innerHTML = snap.docs.map(doc => {
                        const u = doc.data();
                        return `<tr><td style="padding:15px;">${u.name}</td><td>${u.email}</td><td>ONLINE</td><td><button class="btn" style="font-size:0.5rem">BAN</button></td></tr>`;
                    }).join('');
                });
                db.collection("orders").onSnapshot(snap => {
                    let rev = 0; snap.forEach(d => rev += d.data().price);
                    document.getElementById('adm-rev').innerText = `$${rev}`;
                    document.getElementById('adm-orders').innerText = snap.size;
                });
            }
        };

        return { ui: UI, auth: Auth, orders: Orders, admin: Admin };
    })();

    // GLOBAL KEYS
    window.addEventListener('keydown', e => {
        if(e.shiftKey && e.key === 'A') Loupa.admin.toggle();
        if(e.key === 'Escape') Loupa.ui.closeModal();
    });

    window.onload = () => {
        Loupa.ui.init();
        Loupa.auth.init();
    };
    </script>
</body>
</html>
