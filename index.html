<style>
    /* New Service Specific Styles */
    .matrix-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-top: 3rem;
    }

    .matrix-item {
        background: var(--glass);
        border: 1px solid var(--glass-border);
        padding: 2rem;
        border-radius: 8px;
        transition: all 0.4s var(--ease);
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .matrix-item:hover {
        border-color: var(--accent);
        background: rgba(255, 85, 0, 0.05);
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .matrix-item h3 { margin: 0; font-family: 'Space Grotesk'; font-size: 1.2rem; }
    .matrix-item .price { 
        color: var(--accent); 
        font-family: 'JetBrains Mono'; 
        font-weight: 700; 
        font-size: 1.4rem; 
        margin: 1rem 0;
    }
    .matrix-item p { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 1.5rem; flex-grow: 1; }

    .tag {
        font-size: 0.6rem;
        letter-spacing: 1px;
        text-transform: uppercase;
        background: var(--accent-muted);
        padding: 2px 8px;
        border-radius: 4px;
        width: fit-content;
        margin-bottom: 10px;
    }

    /* Selection Overlay */
    #checkout-overlay {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 350px;
        background: #0a0a0a;
        border: 1px solid var(--accent);
        padding: 2rem;
        z-index: 1000;
        box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        display: none;
        animation: slideIn 0.5s var(--ease);
    }

    @keyframes slideIn {
        from { transform: translateX(110%); }
        to { transform: translateX(0); }
    }
</style>

<div id="main-content" style="display:none">
    <section id="services">
        <div class="reveal">
            <div class="hero-meta">// SOLUTIONS_ARCHIVE</div>
            <h2 style="font-size: 3rem; font-family: 'Space Grotesk';">Agency Services</h2>
            
            <div class="matrix-grid">
                <div class="matrix-item">
                    <div>
                        <div class="tag">Development</div>
                        <h3>Custom SaaS MVP</h3>
                        <p>Full-stack web application built with React/Firebase. Ready for users.</p>
                    </div>
                    <div class="price">$1,499</div>
                    <button onclick="selectService('SaaS MVP', 1499)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Design</div>
                        <h3>Brand Identity</h3>
                        <p>Logo, typography, and visual language for your digital presence.</p>
                    </div>
                    <div class="price">$450</div>
                    <button onclick="selectService('Brand Identity', 450)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Edit</div>
                        <h3>Web Maintenance</h3>
                        <p>24/7 bug fixes, CSS tweaks, and content updates for existing sites.</p>
                    </div>
                    <div class="price">$150/mo</div>
                    <button onclick="selectService('Maintenance', 150)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Intelligence</div>
                        <h3>Custom AI Agent</h3>
                        <p>Personalized GPT/LLM agent trained on your specific business data.</p>
                    </div>
                    <div class="price">$899</div>
                    <button onclick="selectService('AI Agent', 899)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Automation</div>
                        <h3>Social Auto-Bot</h3>
                        <p>Automated content posting and engagement for X, IG, and LinkedIn.</p>
                    </div>
                    <div class="price">$299</div>
                    <button onclick="selectService('Social Bot', 299)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Data</div>
                        <h3>Scraping Engine</h3>
                        <p>High-speed data extraction tool for lead generation or research.</p>
                    </div>
                    <div class="price">$350</div>
                    <button onclick="selectService('Scraper', 350)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Cloud</div>
                        <h3>AWS Migration</h3>
                        <p>Move your legacy system to the cloud with zero downtime.</p>
                    </div>
                    <div class="price">$1,200</div>
                    <button onclick="selectService('AWS Migration', 1200)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Security</div>
                        <h3>Pentest Audit</h3>
                        <p>Comprehensive vulnerability scan and security patch report.</p>
                    </div>
                    <div class="price">$600</div>
                    <button onclick="selectService('Security Audit', 600)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div>
                        <div class="tag">Web3</div>
                        <h3>DApp Interface</h3>
                        <p>Integration with MetaMask and smart contracts for Web3 apps.</p>
                    </div>
                    <div class="price">$950</div>
                    <button onclick="selectService('DApp Interface', 950)" class="btn btn-secondary" style="font-size: 0.7rem;">Select Service</button>
                </div>

                <div class="matrix-item">
                    <div><div class="tag">SEO</div><h3>Organic Growth Pack</h3><p>Full SEO audit and keyword strategy implementation.</p></div>
                    <div class="price">$400</div>
                    <button onclick="selectService('SEO Pack', 400)" class="btn btn-secondary" style="font-size:0.7rem;">Select</button>
                </div>
                <div class="matrix-item">
                    <div><div class="tag">API</div><h3>Custom API Design</h3><p>Fast, RESTful APIs for your mobile or web apps.</p></div>
                    <div class="price">$550</div>
                    <button onclick="selectService('API Design', 550)" class="btn btn-secondary" style="font-size:0.7rem;">Select</button>
                </div>
                <div class="matrix-item">
                    <div><div class="tag">Bot</div><h3>Discord Economy</h3><p>Custom economy and leveling bots for your community.</p></div>
                    <div class="price">$200</div>
                    <button onclick="selectService('Discord Bot', 200)" class="btn btn-secondary" style="font-size:0.7rem;">Select</button>
                </div>
                <div class="matrix-item">
                    <div><div class="tag">Optimization</div><h3>Core Web Vitals</h3><p>Extreme speed optimization for slow WordPress sites.</p></div>
                    <div class="price">$300</div>
                    <button onclick="selectService('Page Speed', 300)" class="btn btn-secondary" style="font-size:0.7rem;">Select</button>
                </div>
                <div class="matrix-item">
                    <div><div class="tag">Consult</div><h3>System Architecting</h3><p>1-on-1 strategy call for large scale technical planning.</p></div>
                    <div class="price">$250/hr</div>
                    <button onclick="selectService('Consulting', 250)" class="btn btn-secondary" style="font-size:0.7rem;">Select</button>
                </div>
                <div class="matrix-item">
                    <div><div class="tag">App</div><h3>PWA Development</h3><p>Turn your website into an installable mobile app.</p></div>
                    <div class="price">$700</div>
                    <button onclick="selectService('PWA', 700)" class="btn btn-secondary" style="font-size:0.7rem;">Select</button>
                </div>
            </div>
        </div>
    </section>

    <div id="checkout-overlay">
        <h4 id="check-name" style="margin-top:0; color:var(--accent);">Service Selected</h4>
        <p id="check-price" style="font-family:'JetBrains Mono'; font-size:1.5rem; margin:10px 0;">$0.00</p>
        <div id="paypal-matrix-container"></div>
        <button onclick="this.parentElement.style.display='none'" class="btn" style="width:100%; font-size:0.6rem; color:var(--text-muted);">CANCEL_TRANSACTION</button>
    </div>
</div>

<script>
    // --- SERVICE PROCUREMENT LOGIC ---

    function selectService(name, price) {
        const overlay = document.getElementById('checkout-overlay');
        overlay.style.display = 'block';
        
        document.getElementById('check-name').innerText = name.toUpperCase();
        document.getElementById('check-price').innerText = `$${price}.00`;

        // Clear previous button
        document.getElementById('paypal-matrix-container').innerHTML = '';

        // Generate dynamic PayPal button
        paypal.Buttons({
            createOrder: (data, actions) => {
                return actions.order.create({
                    purchase_units: [{
                        description: `LOUPA_SERVICE: ${name}`,
                        amount: { value: price.toString() }
                    }]
                });
            },
            onApprove: (data, actions) => {
                return actions.order.capture().then(async (details) => {
                    // Log transaction to Firestore
                    await db.collection("orders").add({
                        userId: auth.currentUser.uid,
                        userEmail: auth.currentUser.email,
                        service: name,
                        amount: price,
                        status: 'PAID',
                        timestamp: new Date()
                    });
                    
                    alert("TRANSACTION_COMPLETE: Our team will contact you within 6 hours.");
                    overlay.style.display = 'none';
                });
            }
        }).render('#paypal-matrix-container');
    }
</script>
